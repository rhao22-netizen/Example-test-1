<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mini Game</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 24px; }
    .box { max-width: 520px; padding: 18px; border: 1px solid #ccc; border-radius: 12px; }
    button { font-size: 18px; padding: 10px 16px; cursor: pointer; }
    .row { display:flex; gap:12px; align-items:center; flex-wrap:wrap; margin-top:12px; }
    .big { font-size: 28px; font-weight: 700; }
    .hint { color:#555; }
  </style>
</head>
<body>
  <div class="box">
    <h1>⏱️ Click Challenge</h1>
    <p class="hint">规则：按 Start 后，你有 <b>10 秒</b>，点击按钮越多分越高。</p>

    <div class="row">
      <button id="startBtn">Start</button>
      <button id="clickBtn" disabled>CLICK ME</button>
    </div>

    <p class="big">Score: <span id="score">0</span></p>
    <p>Time left: <span id="time">10.0</span>s</p>
    <p id="msg"></p>
  </div>

  <script>
    const startBtn = document.getElementById("startBtn");
    const clickBtn = document.getElementById("clickBtn");
    const scoreEl = document.getElementById("score");
    const timeEl = document.getElementById("time");
    const msgEl = document.getElementById("msg");

    let score = 0;
    let endAt = 0;
    let timerId = null;

    function setState(running) {
      clickBtn.disabled = !running;
      startBtn.disabled = running;
    }

    function reset() {
      score = 0;
      scoreEl.textContent = "0";
      timeEl.textContent = "10.0";
      msgEl.textContent = "";
    }

    function tick() {
      const left = Math.max(0, endAt - performance.now());
      timeEl.textContent = (left / 1000).toFixed(1);

      if (left <= 0) {
        clearInterval(timerId);
        timerId = null;
        setState(false);
        msgEl.textContent = `Game over! Your score is ${score}.`;
      }
    }

    startBtn.addEventListener("click", () => {
      reset();
      setState(true);
      endAt = performance.now() + 10_000;
      timerId = setInterval(tick, 50);
      tick();
    });

    clickBtn.addEventListener("click", () => {
      score += 1;
      scoreEl.textContent = String(score);
    });
  </script>
</body>
</html>
